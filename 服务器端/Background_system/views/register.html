<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多人博客-首页</title>
    <link rel="stylesheet" href="./public/css/bootstrap.min.css">
    <link rel="stylesheet" href="./public/css/login.css">
    <link rel="stylesheet" href="./public/css/base.css">
    <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <div class="container">
        <form id='registerForm' class="form-signin">
            <li><span class="glyphicon glyphicon-leaf"  aria-hidden="true"></span></li>
            <h2 class="form-signin-heading">Please Register</h2>
            <label  for="inputEmail">email</label>
            <input name="email" class="form-control" id="inputEmail" autofocus="" required="" type="email" placeholder="邮箱">
            <label  for="inputEmail">name</label>
            <input name="username" class="form-control" id="inputName" autofocus="" required="" type="text" placeholder="用户名">
            <label  for="inputPassword">Password</label>
            <input name="password" class="form-control" id="inputPassword" autofocus="" required="" type="password" placeholder="密码">
            <button class="btn btn-success btn-block" type="submit" style="margin-top: 20px">注册</button>
        </form>
        <div class="message"><p>已有账号?<a href="./login.html">点击登录</a></p> </div>
    </div>
</body>
</html>
<script src="./public/js/jquery.min.js"></script>
<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./public/js/bootstrap.min.js"></script>
<script src="./public/js/ajax_tools.js"></script>
<script type="text/javascript">
    window.onload = function(){
    var registerForm = document.querySelector('#registerForm')
    var form = $(registerForm)
    registerForm.addEventListener('submit',function(e){
        form = $(this).serialize()
        console.log(form)
        e.preventDefault();
        var obj = {
        method:'post',
        url:'./register',
        data:form,
        callback:function(data){
            data = JSON.parse(data)
            var err_code = data.err_code
            if(err_code===0){
                window.alert('注册成功g')
                window.location.href = '/';
            }else if(err_code===1){
                window.alert('邮箱或昵称已经存在')
            }else{
                window.alert('服务器繁忙')
            }
        }
        }
         ajax(obj)
    })      
    }   
</script>>